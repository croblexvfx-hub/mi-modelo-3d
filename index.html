<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Margot AR Menu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

    <!-- MindAR -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>

    <style>
      body {
        margin: 0;
        overflow: hidden;
      }

      .ui-button {
        z-index: 9999;
        position: fixed;
        bottom: 30px;
        padding: 15px 25px;
        font-size: 18px;
        background: white;
        border-radius: 10px;
        border: none;
        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      }

      #prev { left: 20px; }
      #next { right: 20px; }
    </style>
  </head>

  <body>

    <button id="prev" class="ui-button">←</button>
    <button id="next" class="ui-button">→</button>

    <a-scene
      mindar-image="imageTargetSrc: margot_targets.mind; filterMinCF: 0.0002; filterBeta: 0.005;"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
    >

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">
        <a-entity id="model-container"></a-entity>
      </a-entity>

      <!-- Luz básica para que el PBR no muera -->
      <a-light type="ambient" intensity="1"></a-light>
      <a-light type="directional" position="0 2 2" intensity="0.8"></a-light>

    </a-scene>

<script>
  const models = ["Plato_01.glb", "Plato_02.glb"];
  let index = 0;

  const container = document.querySelector("#model-container");
  const nextBtn = document.querySelector("#next");
  const prevBtn = document.querySelector("#prev");

  function loadModel() {
    container.innerHTML = "";

    const model = document.createElement("a-gltf-model");
    model.setAttribute("src", models[index]);
    model.setAttribute("position", "0 0 0");
    model.setAttribute("rotation", "90 0 0");
    model.setAttribute("scale", "2.99 2.99 2.99");

    container.appendChild(model);

    console.log("Modelo cargado:", models[index]);
  }

  nextBtn.addEventListener("click", function() {
    index = (index + 1) % models.length;
    loadModel();
  });

  prevBtn.addEventListener("click", function() {
    index = (index - 1 + models.length) % models.length;
    loadModel();
  });

  loadModel();
</script>

  </body>
</html>
